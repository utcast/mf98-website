import{i as H,j as N,y,r as K,c as i,z as v,o as s,a as o,b as $,t as l,e as b,g as D,F as m,f as _,v as x,x as g}from"./Dpnnv8xY.js";import{u as q}from"./Dcp0abP4.js";const A=()=>({getKikaku:e=>B[e]||null}),B={kaiten:{title:"回転ショー",description:"身近な「回転」に隠された不思議を大公開！",color:"youtube",channel:"show",url:{name:"kaiten"},image:"/img/thumbnail/kaiten.png",title_short:"回転ショー"},hikari:{title:"光の箱",description:"光と色の不思議を楽しめるワークショップ！",color:"zoom",channel:"atelier",url:{name:"hikari"},image:"/img/thumbnail/hikari.png",title_short:"光の箱"},san_gen:{title:"三原色コップ",description:"三原色で色が混ざる仕組みを体感しよう！",color:"zoom",channel:"atelier",url:{name:"san_gen"},image:"/img/thumbnail/san_gen.png",title_short:"三原色コップ"},nenriki:{title:"念力振り子",description:"不思議な振り子の動きの秘密に迫る！",color:"zoom",channel:"atelier",url:{name:"nenriki"},image:"/img/thumbnail/nenriki.png",title_short:"念力振り子"}},M=H([]),E=()=>{const u=async()=>{try{const n=await fetch("https://script.google.com/macros/s/AKfycby5suexYWHerSXvPKLqzaUEkquTrOPP716e_1DTq3V84YxSMwq3xtW5lZ_oYiOXkwZY/exec");M.value=await n.json()}catch(n){console.error("チケットデータの取得に失敗しました:",n)}},e=n=>M.value.find(d=>d.id===n)||{reserved:0,limit:0};return N(()=>{u()}),{fetchTickets:u,getTicketStatus:e}},O=[{id:0,channel:"show",day:1,kikaku:"kaiten",startHour:10,startMin:0,endHour:10,endMin:45},{id:1,channel:"atelier",day:1,kikaku:"hikari",startHour:11,startMin:0,endHour:11,endMin:45},{id:2,channel:"atelier",day:1,kikaku:"san_gen",startHour:13,startMin:0,endHour:13,endMin:45},{id:3,channel:"atelier",day:1,kikaku:"nenriki",startHour:15,startMin:0,endHour:15,endMin:45}],P={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50"},R={class:"bg-white p-4 rounded w-96 relative"},V={class:"text-center mb-4"},Y={class:"text-lg font-bold"},j={class:"text-sm text-gray-600"},U={key:0,class:"text-sm font-bold text-center text-gray-800"},W=y({__name:"ScheduleModal",props:{schedule:{}},setup(u){return(e,n)=>{const d=K("Icon");return e.schedule.kikakuInfo?(s(),i("div",P,[o("div",R,[o("button",{class:"absolute top-2 right-2 text-red-500",onClick:n[0]||(n[0]=k=>e.$emit("close"))},"✕"),o("div",V,[$(d,{icon:e.schedule.kikakuInfo.icon,class:"text-3xl mb-2"},null,8,["icon"]),o("h3",Y,l(e.schedule.kikakuInfo.title),1),o("p",j,l(e.schedule.kikakuInfo.description),1)]),e.schedule.channel==="atelier"?(s(),i("div",U," 整理券: "+l(e.schedule.ticketStatus.reserved)+"/"+l(e.schedule.ticketStatus.limit)+"枚 ",1)):v("",!0)])])):v("",!0)}}}),F={class:"overflow-x-auto"},L={class:"min-w-[800px] overflow-y-auto border",style:{height:"800px"}},X={class:"grid",style:"grid-template-columns: 80px repeat(4, 1fr)"},Z={class:"relative"},G={class:"absolute top-0 text-xs text-right pr-2",style:{top:"-6px"}},J=["onClick"],Q={class:"font-bold"},tt={class:"text-[10px]"},h=8,f=15,w=18,et=15,nt=y({__name:"ScheduleTable",setup(u){const{getKikaku:e}=A(),{getTicketStatus:n}=E(),d=Array.from({length:w-h+1},(t,a)=>a+h),k=b(()=>O.map(t=>{const a=e(t.kikaku);return a?{...t,kikakuInfo:a,ticketStatus:n(t.id)}:null}).filter(t=>t!==null)),S=b(()=>[k.value.filter(t=>t.day===1&&t.channel==="show"),k.value.filter(t=>t.day===1&&t.channel==="atelier"),k.value.filter(t=>t.day===2&&t.channel==="show"),k.value.filter(t=>t.day===2&&t.channel==="atelier")]),I=t=>{const a=t.startHour*60+t.startMin,c=h*60+f;return a-c},T=t=>{const a=t.startHour*60+t.startMin;return t.endHour*60+t.endMin-a},p=H(null),z=t=>{p.value=t};return(t,a)=>(s(),i("div",F,[o("div",L,[o("div",X,[o("div",Z,[(s(!0),i(m,null,_(x(d),c=>(s(),i("div",{key:c,class:"h-[60px] relative"},[o("div",G,l(c)+":00 ",1)]))),128))]),(s(!0),i(m,null,_(S.value,(c,C)=>(s(),i("div",{key:C,class:"relative border-l border-gray-300 bg-white"},[(s(!0),i(m,null,_(x(d),r=>(s(),i("div",{key:r,class:"absolute w-full border-t border-dotted border-gray-400 z-0",style:g(`top: ${r*60-h*60-f}px`)},null,4))),128)),o("div",{class:"absolute w-full border-t border-dotted border-gray-400 z-0",style:g(`top: ${w*60+et-h*60-f}px`)},null,4),(s(!0),i(m,null,_(c,r=>(s(),i("div",{key:r.id,class:"absolute z-10 bg-blue-500 text-white text-xs rounded p-1 shadow hover:bg-blue-600 cursor-pointer",style:g(`top: ${I(r)}px; height: ${T(r)}px; left: 4px; right: 4px;`),onClick:ot=>z(r)},[o("div",Q,l(r.kikakuInfo.title_short),1),o("div",tt,l(r.startHour)+":"+l(("0"+r.startMin).slice(-2))+" 〜 "+l(r.endHour)+":"+l(("0"+r.endMin).slice(-2)),1)],12,J))),128))]))),128))])]),p.value?(s(),D(W,{key:0,schedule:p.value,onClose:a[0]||(a[0]=c=>p.value=null)},null,8,["schedule"])):v("",!0)]))}}),st={class:"container mx-auto px-4 py-6"},at=y({__name:"schedule",setup(u){return q({title:"タイムスケジュール",meta:[{name:"description",content:"東京大学の学園祭「五月祭」の特設ページです！"},{property:"og:description",content:"東京大学の学園祭「五月祭」の特設ページです！"},{property:"og:url",content:"https://ut-cast.net/mayfes2025/schedule"}]}),(e,n)=>(s(),i("div",st,[n[0]||(n[0]=o("h1",{class:"text-3xl font-bold text-center mb-4"},"タイムスケジュール",-1)),$(nt)]))}});export{at as default};
