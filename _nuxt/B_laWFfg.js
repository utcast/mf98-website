import{T as g}from"./BLty3UrU.js";import{u as N,s as U,a as z}from"./D7mQmkEg.js";import{x as _,v as B,c as r,f as c,o as s,a as l,b as u,n as y,t as d,g as $,r as R,i as V,p as A,F as m,h as x,l as w,m as M}from"./DHq9e_XP.js";import{u as j}from"./3MF9q9rN.js";const E={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50"},F={class:"bg-white p-4 rounded w-96 relative"},K={class:"text-center mb-4"},O={key:0,class:"text-sm text-center text-gray-600 mb-2"},L={key:0},P={key:1},W={key:1,class:"text-sm font-bold text-center"},q={key:0,class:"text-gray-500"},G=_({__name:"ScheduleModal",props:{schedule:{}},setup(S){function h(e,a){const i=String(e).padStart(2,"0"),p=String(a).padStart(2,"0");return`${i}:${p}`}return(e,a)=>{const i=B("Icon");return e.schedule.kikakuInfo?(s(),r("div",E,[l("div",F,[l("button",{class:"absolute top-2 right-2 text-red-500",onClick:a[0]||(a[0]=p=>e.$emit("close"))},"✕"),l("div",K,[u(i,{icon:e.schedule.kikakuInfo.icon,class:"text-3xl mb-2"},null,8,["icon"]),l("h3",{class:y(["text-lg font-bold",{"line-through text-gray-500":e.schedule.channel==="atelier"&&e.schedule.ticketStatus.reserved===0}])},[u(g,{v:e.schedule.kikakuInfo.title},null,8,["v"])],2),l("p",{class:y(["text-sm",{"line-through text-gray-500":e.schedule.channel==="atelier"&&e.schedule.ticketStatus.reserved===0,"text-gray-600":!(e.schedule.channel==="atelier"&&e.schedule.ticketStatus.reserved===0)}])},[u(g,{v:e.schedule.kikakuInfo.description},null,8,["v"])],2)]),e.schedule.channel==="atelier"?(s(),r("div",O,[e.schedule.ticketDistHour!==void 0&&e.schedule.ticketDistMin!==void 0?(s(),r("div",L," 整理券配布開始: "+d(h(e.schedule.ticketDistHour,e.schedule.ticketDistMin)),1)):c("",!0),e.schedule.lineUpHour!==void 0&&e.schedule.lineUpMin!==void 0?(s(),r("div",P," 整列可能: "+d(h(e.schedule.lineUpHour,e.schedule.lineUpMin)),1)):c("",!0)])):c("",!0),e.schedule.channel==="atelier"?(s(),r("div",W,[e.schedule.ticketStatus.limit===0?(s(),r("div",q," loading... ")):(s(),r("div",{key:1,class:y({"line-through text-gray-500":e.schedule.ticketStatus.reserved===0,"text-red-500":e.schedule.ticketStatus.reserved>=1&&e.schedule.ticketStatus.reserved<=5,"text-gray-800":e.schedule.ticketStatus.reserved>5})},[u(g,{v:`[整理券残](せいりけんのこ)り: ${e.schedule.ticketStatus.reserved}/${e.schedule.ticketStatus.limit}枚`},null,8,["v"])],2))])):c("",!0)])])):c("",!0)}}}),J={class:"overflow-x-auto"},Q={class:"min-w-[800px] overflow-y-auto border",style:{height:"800px"}},X={class:"grid",style:"grid-template-columns: 80px repeat(4, 1fr)"},Y={class:"relative"},Z={class:"absolute top-0 text-xs text-right pr-2",style:{top:"-6px"}},ee=["onClick"],te={class:"font-bold text-[9px]"},se={class:"text-[8px]"},f=8,H=15,re=18,ne=_({__name:"ScheduleTable",setup(S){const{getKikaku:h}=z(),{getTicketStatus:e}=N(),a=Array.from({length:re-f+1},(t,n)=>n+f),i=$(()=>U.map(t=>{const n=h(t.kikaku);return n?{...t,kikakuInfo:n,ticketStatus:e(t.id)}:null}).filter(t=>t!==null)),p=$(()=>[i.value.filter(t=>t.day===1&&t.channel==="show"),i.value.filter(t=>t.day===1&&t.channel==="atelier"),i.value.filter(t=>t.day===2&&t.channel==="show"),i.value.filter(t=>t.day===2&&t.channel==="atelier")]),I=t=>{const n=t.startHour*60+t.startMin,b=f*60+H;return n-b},T=t=>{const n=t.startHour*60+t.startMin;return t.endHour*60+t.endMin-n},k=R(null),C=t=>{k.value=t};return(t,n)=>{const b=g;return s(),r("div",J,[l("div",Q,[n[1]||(n[1]=A('<div class="grid" style="grid-template-columns: 80px repeat(4, 1fr)"><div class="border-b border-r row-span-2 flex items-center justify-center text-xs font-bold"> 時間 </div><div class="col-span-2 border-b border-r text-center text-xs font-bold bg-blue-500 text-white"> 1日目 </div><div class="col-span-2 border-b text-center text-xs font-bold bg-blue-500 text-white"> 2日目 </div><div class="border-r text-center text-xs bg-blue-500 text-white">ショー</div><div class="border-r text-center text-xs bg-blue-500 text-white">アトリエ</div><div class="border-r text-center text-xs bg-blue-500 text-white">ショー</div><div class="text-center text-xs bg-blue-500 text-white">アトリエ</div></div>',1)),l("div",X,[l("div",Y,[(s(!0),r(m,null,x(w(a),v=>(s(),r("div",{key:v,class:"h-[60px] relative"},[l("div",Z,d(v)+":00 ",1)]))),128))]),(s(!0),r(m,null,x(p.value,(v,D)=>(s(),r("div",{key:D,class:"relative border-l border-gray-300 bg-white"},[(s(!0),r(m,null,x(w(a),o=>(s(),r("div",{key:o,class:"absolute w-full border-t border-dotted border-gray-400 z-0",style:M(`top: ${o*60-f*60-H}px`)},null,4))),128)),(s(!0),r(m,null,x(v,o=>(s(),r("div",{key:o.id,class:"absolute z-10 bg-blue-500 text-white text-[10px] rounded p-1 shadow hover:bg-blue-600 cursor-pointer",style:M(`top: ${I(o)}px; height: ${T(o)}px; left: 4px; right: 4px;`),onClick:le=>C(o)},[l("div",te,[u(b,{v:o.kikakuInfo.title_short},null,8,["v"])]),l("div",se,d(o.startHour)+":"+d(("0"+o.startMin).slice(-2))+" 〜 "+d(o.endHour)+":"+d(("0"+o.endMin).slice(-2)),1)],12,ee))),128))]))),128))])]),k.value?(s(),V(G,{key:0,schedule:k.value,onClose:n[0]||(n[0]=v=>k.value=null)},null,8,["schedule"])):c("",!0)])}}}),oe={class:"container mx-auto px-4 py-6"},ue=_({__name:"schedule",setup(S){return j({title:"タイムスケジュール",meta:[{name:"description",content:"東京大学の学園祭「五月祭」の特設ページです！"},{property:"og:description",content:"東京大学の学園祭「五月祭」の特設ページです！"},{property:"og:url",content:"https://ut-cast.net/mayfes2025/schedule"}]}),(h,e)=>(s(),r("div",oe,[e[0]||(e[0]=l("h1",{class:"text-3xl font-bold text-center mb-4"},"タイムスケジュール",-1)),u(ne)]))}});export{ue as default};
