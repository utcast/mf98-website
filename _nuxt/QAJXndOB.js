import{_ as g}from"./BTyAgnTN.js";import{j as R,i as T,S as f,R as q,c as r,z as _,o as a,a as s,b as d,n as v,e as b,f as A,F as H,r as p,t as h,x,y as S}from"./BBjnqqaJ.js";import{u as B}from"./BOEO-vGu.js";const D=()=>({getKikaku:t=>O[t]||null}),O={kaiten:{title:"[回転](かいてん)ショー",description:"[身近](みぢか)な「[回転](かいてん)」に[隠](かく)された[不思議](ふしぎ)を[解](と)き[明](あ)かす！",color:"youtube",channel:"show",url:{name:"kaiten"},image:"/img/thumbnail/kaiten.png",title_short:"[回転](かいてん)ショー"},hikari:{title:"[光](ひかり)の[箱](はこ)",description:"[光](ひかり)にかざすとキラキラ[光](ひか)る！？カラフルに[光](ひか)る[箱](はこ)を[作](つく)って[反射](はんしゃ)の[仕組](しく)みについて[知](し)ろう！",color:"zoom",channel:"atelier",url:{name:"hikari"},image:"/img/thumbnail/hikari.png",title_short:"[光](ひかり)の[箱](はこ)"},san_gen:{title:"[三原色](さんげんしょく)コップ",description:"[手元](てもと)で[光](ひかり)を[混](ま)ぜられる！？コップを[作](つく)って[光](ひかり)の[三原色](さんげんしょく)について[知](し)ろう！",color:"zoom",channel:"atelier",url:{name:"san_gen"},image:"/img/thumbnail/san_gen.png",title_short:"[三原色](さんげんしょく)コップ"},nenriki:{title:"[念力振](ねんりきふ)り[子](こ)",description:"[思](おも)いのままに[揺](ゆ)らせる……？ゆらゆら[揺](ゆ)れる[工作](こうさく)をして[振](ふ)り[子](こ)に[詳](くわ)しくなっちゃおう！",color:"zoom",channel:"atelier",url:{name:"nenriki"},image:"/img/thumbnail/nenriki.png",title_short:"[念力振](ねんりきふ)り[子](こ)"},kimiS:{title:"君[きみ]もSC[えすしー]をやってみよう",description:"SC[えすしー]の[楽](たの)しさを[体験](たいけん)しよう！",color:"zoom",channel:"atelier",url:{name:"kimiS"},image:"/img/thumbnail/kimiS.png",title_short:"君[きみ]S[えす]"}},w=T([]),P=()=>{const l=async()=>{try{const n=await fetch("https://script.google.com/macros/s/AKfycby5suexYWHerSXvPKLqzaUEkquTrOPP716e_1DTq3V84YxSMwq3xtW5lZ_oYiOXkwZY/exec");w.value=await n.json()}catch(n){console.error("チケットデータの取得に失敗しました:",n)}},t=n=>w.value.find(u=>u.id===n)||{reserved:0,limit:0};return R(()=>{l()}),{fetchTickets:l,getTicketStatus:t}},V=[{id:0,channel:"atelier",day:1,kikaku:"nenriki",startHour:9,startMin:30,endHour:10,endMin:0},{id:1,channel:"atelier",day:1,kikaku:"nenriki",startHour:10,startMin:30,endHour:11,endMin:0},{id:2,channel:"atelier",day:1,kikaku:"nenriki",startHour:11,startMin:30,endHour:12,endMin:0},{id:3,channel:"atelier",day:1,kikaku:"san_gen",startHour:12,startMin:30,endHour:13,endMin:0},{id:4,channel:"atelier",day:1,kikaku:"san_gen",startHour:13,startMin:30,endHour:14,endMin:0},{id:5,channel:"atelier",day:1,kikaku:"hikari",startHour:14,startMin:30,endHour:15,endMin:0},{id:6,channel:"atelier",day:1,kikaku:"hikari",startHour:15,startMin:30,endHour:16,endMin:0},{id:7,channel:"atelier",day:1,kikaku:"hikari",startHour:16,startMin:30,endHour:17,endMin:0},{id:8,channel:"atelier",day:2,kikaku:"nenriki",startHour:9,startMin:30,endHour:10,endMin:0},{id:9,channel:"atelier",day:2,kikaku:"nenriki",startHour:10,startMin:30,endHour:11,endMin:0},{id:10,channel:"atelier",day:2,kikaku:"nenriki",startHour:11,startMin:30,endHour:12,endMin:0},{id:11,channel:"atelier",day:2,kikaku:"san_gen",startHour:12,startMin:30,endHour:13,endMin:0},{id:12,channel:"atelier",day:2,kikaku:"san_gen",startHour:13,startMin:30,endHour:14,endMin:0},{id:13,channel:"atelier",day:2,kikaku:"hikari",startHour:14,startMin:30,endHour:15,endMin:0},{id:14,channel:"atelier",day:2,kikaku:"hikari",startHour:15,startMin:30,endHour:16,endMin:0},{id:15,channel:"atelier",day:2,kikaku:"hikari",startHour:16,startMin:30,endHour:17,endMin:0},{id:16,channel:"show",day:1,kikaku:"kaiten",startHour:10,startMin:15,endHour:10,endMin:55},{id:17,channel:"show",day:1,kikaku:"kimiS",startHour:11,startMin:15,endHour:11,endMin:55},{id:18,channel:"show",day:1,kikaku:"kaiten",startHour:12,startMin:15,endHour:12,endMin:55},{id:19,channel:"show",day:1,kikaku:"kimiS",startHour:14,startMin:15,endHour:14,endMin:55},{id:20,channel:"show",day:1,kikaku:"kaiten",startHour:15,startMin:15,endHour:15,endMin:55},{id:21,channel:"show",day:1,kikaku:"kaiten",startHour:16,startMin:15,endHour:16,endMin:55},{id:22,channel:"show",day:1,kikaku:"kaiten",startHour:13,startMin:15,endHour:13,endMin:55},{id:23,channel:"show",day:1,kikaku:"kaiten",startHour:17,startMin:15,endHour:17,endMin:55},{id:24,channel:"show",day:2,kikaku:"kaiten",startHour:10,startMin:15,endHour:10,endMin:55},{id:25,channel:"show",day:2,kikaku:"kimiS",startHour:11,startMin:15,endHour:11,endMin:55},{id:26,channel:"show",day:2,kikaku:"kaiten",startHour:12,startMin:15,endHour:12,endMin:55},{id:27,channel:"show",day:2,kikaku:"kimiS",startHour:14,startMin:15,endHour:14,endMin:55},{id:28,channel:"show",day:2,kikaku:"kaiten",startHour:15,startMin:15,endHour:15,endMin:55},{id:29,channel:"show",day:2,kikaku:"kaiten",startHour:16,startMin:15,endHour:16,endMin:55},{id:30,channel:"show",day:2,kikaku:"kaiten",startHour:13,startMin:15,endHour:13,endMin:55},{id:31,channel:"show",day:2,kikaku:"kaiten",startHour:17,startMin:15,endHour:17,endMin:55}],Y={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50"},j={class:"bg-white p-4 rounded w-96 relative"},E={class:"text-center mb-4"},U=f({__name:"ScheduleModal",props:{schedule:{}},setup(l){return(t,n)=>{const u=q("Icon");return t.schedule.kikakuInfo?(a(),r("div",Y,[s("div",j,[s("button",{class:"absolute top-2 right-2 text-red-500",onClick:n[0]||(n[0]=k=>t.$emit("close"))},"✕"),s("div",E,[d(u,{icon:t.schedule.kikakuInfo.icon,class:"text-3xl mb-2"},null,8,["icon"]),s("h3",{class:v(["text-lg font-bold",{"line-through text-gray-500":t.schedule.channel==="atelier"&&t.schedule.ticketStatus.reserved===0}])},[d(g,{v:t.schedule.kikakuInfo.title},null,8,["v"])],2),s("p",{class:v(["text-sm",{"line-through text-gray-500":t.schedule.channel==="atelier"&&t.schedule.ticketStatus.reserved===0,"text-gray-600":!(t.schedule.channel==="atelier"&&t.schedule.ticketStatus.reserved===0)}])},[d(g,{v:t.schedule.kikakuInfo.description},null,8,["v"])],2)]),t.schedule.channel==="atelier"?(a(),r("div",{key:0,class:v(["text-sm font-bold text-center",{"line-through text-gray-500":t.schedule.ticketStatus.reserved===0,"text-red-500":t.schedule.ticketStatus.reserved>=1&&t.schedule.ticketStatus.reserved<=5,"text-gray-800":t.schedule.ticketStatus.reserved>5}])},[d(g,{v:`整理券残り: ${t.schedule.ticketStatus.reserved}/${t.schedule.ticketStatus.limit}枚`},null,8,["v"])],2)):_("",!0)])])):_("",!0)}}}),W={class:"overflow-x-auto"},F={class:"min-w-[800px] overflow-y-auto border",style:{height:"800px"}},L={class:"grid",style:"grid-template-columns: 80px repeat(4, 1fr)"},X={class:"relative"},Z={class:"absolute top-0 text-xs text-right pr-2",style:{top:"-6px"}},G=["onClick"],J={class:"font-bold text-[9px]"},Q={class:"text-[8px]"},y=8,$=15,ee=18,te=f({__name:"ScheduleTable",setup(l){const{getKikaku:t}=D(),{getTicketStatus:n}=P(),u=Array.from({length:ee-y+1},(e,o)=>o+y),k=b(()=>V.map(e=>{const o=t(e.kikaku);return o?{...e,kikakuInfo:o,ticketStatus:n(e.id)}:null}).filter(e=>e!==null)),z=b(()=>[k.value.filter(e=>e.day===1&&e.channel==="show"),k.value.filter(e=>e.day===1&&e.channel==="atelier"),k.value.filter(e=>e.day===2&&e.channel==="show"),k.value.filter(e=>e.day===2&&e.channel==="atelier")]),C=e=>{const o=e.startHour*60+e.startMin,M=y*60+$;return o-M},I=e=>{const o=e.startHour*60+e.startMin;return e.endHour*60+e.endMin-o},m=T(null),K=e=>{m.value=e};return(e,o)=>{const M=g;return a(),r("div",W,[s("div",F,[s("div",L,[s("div",X,[(a(!0),r(H,null,p(x(u),c=>(a(),r("div",{key:c,class:"h-[60px] relative"},[s("div",Z,h(c)+":00 ",1)]))),128))]),(a(!0),r(H,null,p(z.value,(c,N)=>(a(),r("div",{key:N,class:"relative border-l border-gray-300 bg-white"},[(a(!0),r(H,null,p(x(u),i=>(a(),r("div",{key:i,class:"absolute w-full border-t border-dotted border-gray-400 z-0",style:S(`top: ${i*60-y*60-$}px`)},null,4))),128)),(a(!0),r(H,null,p(c,i=>(a(),r("div",{key:i.id,class:"absolute z-10 bg-blue-500 text-white text-[10px] rounded p-1 shadow hover:bg-blue-600 cursor-pointer",style:S(`top: ${C(i)}px; height: ${I(i)}px; left: 4px; right: 4px;`),onClick:ae=>K(i)},[s("div",J,[d(M,{v:i.kikakuInfo.title_short},null,8,["v"])]),s("div",Q,h(i.startHour)+":"+h(("0"+i.startMin).slice(-2))+" 〜 "+h(i.endHour)+":"+h(("0"+i.endMin).slice(-2)),1)],12,G))),128))]))),128))])]),m.value?(a(),A(U,{key:0,schedule:m.value,onClose:o[0]||(o[0]=c=>m.value=null)},null,8,["schedule"])):_("",!0)])}}}),ne={class:"container mx-auto px-4 py-6"},oe=f({__name:"schedule",setup(l){return B({title:"タイムスケジュール",meta:[{name:"description",content:"東京大学の学園祭「五月祭」の特設ページです！"},{property:"og:description",content:"東京大学の学園祭「五月祭」の特設ページです！"},{property:"og:url",content:"https://ut-cast.net/mayfes2025/schedule"}]}),(t,n)=>(a(),r("div",ne,[n[0]||(n[0]=s("h1",{class:"text-3xl font-bold text-center mb-4"},"タイムスケジュール",-1)),d(te)]))}});export{oe as default};
