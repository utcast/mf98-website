import{T as N}from"./BlCkgLxl.js";import{u as U,s as z,a as A}from"./Dx6nbDGZ.js";import{T as g}from"./jtqkEi-E.js";import{x as _,v as R,c as r,f as c,o as s,a as l,b as u,n as y,t as d,g as $,r as B,i as V,p as j,F as m,h as f,l as w,m as M}from"./BxCfWA3X.js";import{u as E}from"./9CdyahnQ.js";const F={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50"},K={class:"bg-white p-4 rounded w-96 relative"},O={class:"text-center mb-4"},L={key:0,class:"text-sm text-center text-gray-600 mb-2"},P={key:0},W={key:1},q=_({__name:"ScheduleModal",props:{schedule:{}},setup(S){function h(e,a){const i=String(e).padStart(2,"0"),v=String(a).padStart(2,"0");return`${i}:${v}`}return(e,a)=>{const i=R("Icon");return e.schedule.kikakuInfo?(s(),r("div",F,[l("div",K,[l("button",{class:"absolute top-2 right-2 text-red-500",onClick:a[0]||(a[0]=v=>e.$emit("close"))},"✕"),l("div",O,[u(i,{icon:e.schedule.kikakuInfo.icon,class:"text-3xl mb-2"},null,8,["icon"]),l("h3",{class:y(["text-lg font-bold",{"line-through text-gray-500":e.schedule.channel==="atelier"&&e.schedule.ticketStatus.reserved===0}])},[u(g,{v:e.schedule.kikakuInfo.title_en},null,8,["v"])],2),l("p",{class:y(["text-sm",{"line-through text-gray-500":e.schedule.channel==="atelier"&&e.schedule.ticketStatus.reserved===0,"text-gray-600":!(e.schedule.channel==="atelier"&&e.schedule.ticketStatus.reserved===0)}])},[u(g,{v:e.schedule.kikakuInfo.description_en},null,8,["v"])],2)]),e.schedule.channel==="atelier"?(s(),r("div",L,[e.schedule.ticketDistHour!==void 0&&e.schedule.ticketDistMin!==void 0?(s(),r("div",P," Start of numbered ticket distribution: "+d(h(e.schedule.ticketDistHour,e.schedule.ticketDistMin)),1)):c("",!0),e.schedule.lineUpHour!==void 0&&e.schedule.lineUpMin!==void 0?(s(),r("div",W," alignment possible: "+d(h(e.schedule.lineUpHour,e.schedule.lineUpMin)),1)):c("",!0)])):c("",!0),e.schedule.channel==="atelier"?(s(),r("div",{key:1,class:y(["text-sm font-bold text-center",{"line-through text-gray-500":e.schedule.ticketStatus.reserved===0,"text-red-500":e.schedule.ticketStatus.reserved>=1&&e.schedule.ticketStatus.reserved<=5,"text-gray-800":e.schedule.ticketStatus.reserved>5}])},[u(g,{v:`Remaining numbered tickets: ${e.schedule.ticketStatus.reserved}/${e.schedule.ticketStatus.limit}`},null,8,["v"])],2)):c("",!0)])])):c("",!0)}}}),G={class:"overflow-x-auto"},J={class:"min-w-[800px] overflow-y-auto border",style:{height:"800px"}},Q={class:"grid",style:"grid-template-columns: 80px repeat(4, 1fr)"},X={class:"relative"},Y={class:"absolute top-0 text-xs text-right pr-2",style:{top:"-6px"}},Z=["onClick"],ee={class:"font-bold text-[9px]"},te={class:"text-[8px]"},x=8,H=15,se=18,re=_({__name:"ScheduleTable",setup(S){const{getKikaku:h}=A(),{getTicketStatus:e}=U(),a=Array.from({length:se-x+1},(t,n)=>n+x),i=$(()=>z.map(t=>{const n=h(t.kikaku);return n?{...t,kikakuInfo:n,ticketStatus:e(t.id)}:null}).filter(t=>t!==null)),v=$(()=>[i.value.filter(t=>t.day===1&&t.channel==="show"),i.value.filter(t=>t.day===1&&t.channel==="atelier"),i.value.filter(t=>t.day===2&&t.channel==="show"),i.value.filter(t=>t.day===2&&t.channel==="atelier")]),T=t=>{const n=t.startHour*60+t.startMin,k=x*60+H;return n-k},I=t=>{const n=t.startHour*60+t.startMin;return t.endHour*60+t.endMin-n},b=B(null),C=t=>{b.value=t};return(t,n)=>{const k=N;return s(),r("div",G,[l("div",J,[n[1]||(n[1]=j('<div class="grid" style="grid-template-columns: 80px repeat(4, 1fr)"><div class="border-b border-r row-span-2 flex items-center justify-center text-xs font-bold"> time </div><div class="col-span-2 border-b border-r text-center text-xs font-bold bg-blue-500 text-white"> Day 1 </div><div class="col-span-2 border-b text-center text-xs font-bold bg-blue-500 text-white"> Day 2 </div><div class="border-r text-center text-xs bg-blue-500 text-white">Show</div><div class="border-r text-center text-xs bg-blue-500 text-white">Atelier</div><div class="border-r text-center text-xs bg-blue-500 text-white">Show</div><div class="text-center text-xs bg-blue-500 text-white">Atelier</div></div>',1)),l("div",Q,[l("div",X,[(s(!0),r(m,null,f(w(a),p=>(s(),r("div",{key:p,class:"h-[60px] relative"},[l("div",Y,d(p)+":00 ",1)]))),128))]),(s(!0),r(m,null,f(v.value,(p,D)=>(s(),r("div",{key:D,class:"relative border-l border-gray-300 bg-white"},[(s(!0),r(m,null,f(w(a),o=>(s(),r("div",{key:o,class:"absolute w-full border-t border-dotted border-gray-400 z-0",style:M(`top: ${o*60-x*60-H}px`)},null,4))),128)),(s(!0),r(m,null,f(p,o=>(s(),r("div",{key:o.id,class:"absolute z-10 bg-blue-500 text-white text-[10px] rounded p-1 shadow hover:bg-blue-600 cursor-pointer",style:M(`top: ${T(o)}px; height: ${I(o)}px; left: 4px; right: 4px;`),onClick:oe=>C(o)},[l("div",ee,[u(k,{v:o.kikakuInfo.title_short_en},null,8,["v"])]),l("div",te,d(o.startHour)+":"+d(("0"+o.startMin).slice(-2))+" 〜 "+d(o.endHour)+":"+d(("0"+o.endMin).slice(-2)),1)],12,Z))),128))]))),128))])]),b.value?(s(),V(q,{key:0,schedule:b.value,onClose:n[0]||(n[0]=p=>b.value=null)},null,8,["schedule"])):c("",!0)])}}}),ne={class:"container mx-auto px-4 py-6"},ue=_({__name:"schedule",setup(S){return E({title:"Schedule | Mayfes 2025",meta:[{name:"description",content:"東京大学の学園祭「五月祭」の特設ページです！"},{property:"og:description",content:"東京大学の学園祭「五月祭」の特設ページです！"},{property:"og:url",content:"https://ut-cast.net/mayfes2025/schedule"}]}),(h,e)=>(s(),r("div",ne,[e[0]||(e[0]=l("h1",{class:"text-3xl font-bold text-center mb-4"},"Time Schedule",-1)),u(re)]))}});export{ue as default};
