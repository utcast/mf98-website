import{i as w,j as N,y as g,r as K,c as s,z as _,o as i,a,b as S,t as l,e as f,g as D,F as H,f as m,v,x as p}from"./BcM-KPk9.js";import{u as q}from"./D__Q52JE.js";const A=()=>({getKikaku:e=>B[e]||null}),B={kaiten:{title:"回転ショー",description:"身近な「回転」に隠された不思議を大公開！",color:"youtube",channel:"show",url:{name:"kaiten"},image:"/img/thumbnail/kaiten.png",title_short:"回転ショー"},hikari:{title:"光の箱",description:"光と色の不思議を楽しめるワークショップ！",color:"zoom",channel:"atelier",url:{name:"hikari"},image:"/img/thumbnail/hikari.png",title_short:"光の箱"},san_gen:{title:"三原色コップ",description:"三原色で色が混ざる仕組みを体感しよう！",color:"zoom",channel:"atelier",url:{name:"san_gen"},image:"/img/thumbnail/san_gen.png",title_short:"三原色コップ"},nenriki:{title:"念力振り子",description:"不思議な振り子の動きの秘密に迫る！",color:"zoom",channel:"atelier",url:{name:"nenriki"},image:"/img/thumbnail/nenriki.png",title_short:"念力振り子"},kimiS:{title:"君もSCをしてみよう",description:"SCの楽しさを体験しよう！",color:"zoom",channel:"atelier",url:{name:"kimiS"},image:"/img/thumbnail/kimiS.png",title_short:"君S"}},b=w([]),E=()=>{const u=async()=>{try{const n=await fetch("https://script.google.com/macros/s/AKfycby5suexYWHerSXvPKLqzaUEkquTrOPP716e_1DTq3V84YxSMwq3xtW5lZ_oYiOXkwZY/exec");b.value=await n.json()}catch(n){console.error("チケットデータの取得に失敗しました:",n)}},e=n=>b.value.find(k=>k.id===n)||{reserved:0,limit:0};return N(()=>{u()}),{fetchTickets:u,getTicketStatus:e}},O=[{id:0,channel:"atelier",day:1,kikaku:"san_gen",startHour:9,startMin:30,endHour:10,endMin:0},{id:1,channel:"atelier",day:1,kikaku:"nenriki",startHour:10,startMin:30,endHour:11,endMin:0},{id:2,channel:"atelier",day:1,kikaku:"hikari",startHour:11,startMin:30,endHour:12,endMin:0},{id:3,channel:"atelier",day:1,kikaku:"nenriki",startHour:12,startMin:30,endHour:13,endMin:0},{id:4,channel:"atelier",day:1,kikaku:"hikari",startHour:13,startMin:30,endHour:14,endMin:0},{id:5,channel:"atelier",day:1,kikaku:"san_gen",startHour:14,startMin:30,endHour:15,endMin:0},{id:6,channel:"atelier",day:1,kikaku:"nenriki",startHour:15,startMin:30,endHour:16,endMin:0},{id:7,channel:"atelier",day:1,kikaku:"hikari",startHour:16,startMin:30,endHour:17,endMin:0},{id:8,channel:"atelier",day:2,kikaku:"san_gen",startHour:9,startMin:30,endHour:10,endMin:0},{id:9,channel:"atelier",day:2,kikaku:"nenriki",startHour:10,startMin:30,endHour:11,endMin:0},{id:10,channel:"atelier",day:2,kikaku:"hikari",startHour:11,startMin:30,endHour:12,endMin:0},{id:11,channel:"atelier",day:2,kikaku:"nenriki",startHour:12,startMin:30,endHour:13,endMin:0},{id:12,channel:"atelier",day:2,kikaku:"hikari",startHour:13,startMin:30,endHour:14,endMin:0},{id:13,channel:"atelier",day:2,kikaku:"san_gen",startHour:14,startMin:30,endHour:15,endMin:0},{id:14,channel:"atelier",day:2,kikaku:"nenriki",startHour:15,startMin:30,endHour:16,endMin:0},{id:15,channel:"atelier",day:2,kikaku:"hikari",startHour:16,startMin:30,endHour:17,endMin:0},{id:16,channel:"show",day:1,kikaku:"kaiten",startHour:10,startMin:15,endHour:10,endMin:55},{id:17,channel:"show",day:1,kikaku:"kimiS",startHour:11,startMin:15,endHour:11,endMin:55},{id:18,channel:"show",day:1,kikaku:"kaiten",startHour:12,startMin:15,endHour:12,endMin:55},{id:19,channel:"show",day:1,kikaku:"kimiS",startHour:14,startMin:15,endHour:14,endMin:55},{id:20,channel:"show",day:1,kikaku:"kaiten",startHour:15,startMin:15,endHour:15,endMin:55},{id:21,channel:"show",day:1,kikaku:"kaiten",startHour:16,startMin:15,endHour:16,endMin:55},{id:22,channel:"show",day:1,kikaku:"kaiten",startHour:13,startMin:15,endHour:13,endMin:55},{id:23,channel:"show",day:1,kikaku:"kaiten",startHour:17,startMin:15,endHour:17,endMin:55},{id:24,channel:"show",day:2,kikaku:"kaiten",startHour:10,startMin:15,endHour:10,endMin:55},{id:25,channel:"show",day:2,kikaku:"kimiS",startHour:11,startMin:15,endHour:11,endMin:55},{id:26,channel:"show",day:2,kikaku:"kaiten",startHour:12,startMin:15,endHour:12,endMin:55},{id:27,channel:"show",day:2,kikaku:"kimiS",startHour:14,startMin:15,endHour:14,endMin:55},{id:28,channel:"show",day:2,kikaku:"kaiten",startHour:15,startMin:15,endHour:15,endMin:55},{id:29,channel:"show",day:2,kikaku:"kaiten",startHour:16,startMin:15,endHour:16,endMin:55},{id:30,channel:"show",day:2,kikaku:"kaiten",startHour:13,startMin:15,endHour:13,endMin:55},{id:31,channel:"show",day:2,kikaku:"kaiten",startHour:17,startMin:15,endHour:17,endMin:55}],P={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50"},R={class:"bg-white p-4 rounded w-96 relative"},V={class:"text-center mb-4"},Y={class:"text-lg font-bold"},j={class:"text-sm text-gray-600"},U={key:0,class:"text-sm font-bold text-center text-gray-800"},W=g({__name:"ScheduleModal",props:{schedule:{}},setup(u){return(e,n)=>{const k=K("Icon");return e.schedule.kikakuInfo?(i(),s("div",P,[a("div",R,[a("button",{class:"absolute top-2 right-2 text-red-500",onClick:n[0]||(n[0]=c=>e.$emit("close"))},"✕"),a("div",V,[S(k,{icon:e.schedule.kikakuInfo.icon,class:"text-3xl mb-2"},null,8,["icon"]),a("h3",Y,l(e.schedule.kikakuInfo.title),1),a("p",j,l(e.schedule.kikakuInfo.description),1)]),e.schedule.channel==="atelier"?(i(),s("div",U," 整理券: "+l(e.schedule.ticketStatus.reserved)+"/"+l(e.schedule.ticketStatus.limit)+"枚 ",1)):_("",!0)])])):_("",!0)}}}),F={class:"overflow-x-auto"},L={class:"min-w-[800px] overflow-y-auto border",style:{height:"800px"}},X={class:"grid",style:"grid-template-columns: 80px repeat(4, 1fr)"},Z={class:"relative"},G={class:"absolute top-0 text-xs text-right pr-2",style:{top:"-6px"}},J=["onClick"],Q={class:"font-bold"},tt={class:"text-[10px]"},h=8,y=15,x=18,et=15,nt=g({__name:"ScheduleTable",setup(u){const{getKikaku:e}=A(),{getTicketStatus:n}=E(),k=Array.from({length:x-h+1},(t,o)=>o+h),c=f(()=>O.map(t=>{const o=e(t.kikaku);return o?{...t,kikakuInfo:o,ticketStatus:n(t.id)}:null}).filter(t=>t!==null)),$=f(()=>[c.value.filter(t=>t.day===1&&t.channel==="show"),c.value.filter(t=>t.day===1&&t.channel==="atelier"),c.value.filter(t=>t.day===2&&t.channel==="show"),c.value.filter(t=>t.day===2&&t.channel==="atelier")]),z=t=>{const o=t.startHour*60+t.startMin,d=h*60+y;return o-d},I=t=>{const o=t.startHour*60+t.startMin;return t.endHour*60+t.endMin-o},M=w(null),T=t=>{M.value=t};return(t,o)=>(i(),s("div",F,[a("div",L,[a("div",X,[a("div",Z,[(i(!0),s(H,null,m(v(k),d=>(i(),s("div",{key:d,class:"h-[60px] relative"},[a("div",G,l(d)+":00 ",1)]))),128))]),(i(!0),s(H,null,m($.value,(d,C)=>(i(),s("div",{key:C,class:"relative border-l border-gray-300 bg-white"},[(i(!0),s(H,null,m(v(k),r=>(i(),s("div",{key:r,class:"absolute w-full border-t border-dotted border-gray-400 z-0",style:p(`top: ${r*60-h*60-y}px`)},null,4))),128)),a("div",{class:"absolute w-full border-t border-dotted border-gray-400 z-0",style:p(`top: ${x*60+et-h*60-y}px`)},null,4),(i(!0),s(H,null,m(d,r=>(i(),s("div",{key:r.id,class:"absolute z-10 bg-blue-500 text-white text-xs rounded p-1 shadow hover:bg-blue-600 cursor-pointer",style:p(`top: ${z(r)}px; height: ${I(r)}px; left: 4px; right: 4px;`),onClick:at=>T(r)},[a("div",Q,l(r.kikakuInfo.title_short),1),a("div",tt,l(r.startHour)+":"+l(("0"+r.startMin).slice(-2))+" 〜 "+l(r.endHour)+":"+l(("0"+r.endMin).slice(-2)),1)],12,J))),128))]))),128))])]),M.value?(i(),D(W,{key:0,schedule:M.value,onClose:o[0]||(o[0]=d=>M.value=null)},null,8,["schedule"])):_("",!0)]))}}),it={class:"container mx-auto px-4 py-6"},ot=g({__name:"schedule",setup(u){return q({title:"タイムスケジュール",meta:[{name:"description",content:"東京大学の学園祭「五月祭」の特設ページです！"},{property:"og:description",content:"東京大学の学園祭「五月祭」の特設ページです！"},{property:"og:url",content:"https://ut-cast.net/mayfes2025/schedule"}]}),(e,n)=>(i(),s("div",it,[n[0]||(n[0]=a("h1",{class:"text-3xl font-bold text-center mb-4"},"タイムスケジュール",-1)),S(nt)]))}});export{ot as default};
